<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>qLibc: containers/qhasharr.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">qLibc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('qhasharr_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qhasharr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Static(array) hash-table implementation.  
<a href="#details">More...</a></p>

<p><a href="qhasharr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a83012ec9fea85ca5770529997306334d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a83012ec9fea85ca5770529997306334d">qhasharr_calculate_memsize</a> (int max)</td></tr>
<tr class="memdesc:a83012ec9fea85ca5770529997306334d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get how much memory is needed for N slots.  <a href="#a83012ec9fea85ca5770529997306334d">More...</a><br/></td></tr>
<tr class="separator:a83012ec9fea85ca5770529997306334d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f33578b50024a4a239472c52eee18c"><td class="memItemLeft" align="right" valign="top">qhasharr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a> (void *memory, size_t memsize)</td></tr>
<tr class="memdesc:aa0f33578b50024a4a239472c52eee18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize static hash table.  <a href="#aa0f33578b50024a4a239472c52eee18c">More...</a><br/></td></tr>
<tr class="separator:aa0f33578b50024a4a239472c52eee18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f371e7f611a6f647fb58e6b3aaa4dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85f371e7f611a6f647fb58e6b3aaa4dc"></a>
static qhasharr_slot_t *&#160;</td><td class="memItemRight" valign="bottom"><b>_get_slots</b> (qhasharr_t *tbl)</td></tr>
<tr class="separator:a85f371e7f611a6f647fb58e6b3aaa4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969b1074c488063dff5b63aa7125defa"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a969b1074c488063dff5b63aa7125defa">put</a> (qhasharr_t *tbl, const char *key, const void *value, size_t <a class="el" href="qstack_8c.html#a47e1fcd7f30a2bff4b9ad661f8eea361">size</a>)</td></tr>
<tr class="memdesc:a969b1074c488063dff5b63aa7125defa"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a969b1074c488063dff5b63aa7125defa" title="qhasharr-&gt;put(): Put an object into this table. ">put()</a>: Put an object into this table.  <a href="#a969b1074c488063dff5b63aa7125defa">More...</a><br/></td></tr>
<tr class="separator:a969b1074c488063dff5b63aa7125defa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6002779614dbefb5685e2b309f47e98f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a6002779614dbefb5685e2b309f47e98f">putstr</a> (qhasharr_t *tbl, const char *key, const char *str)</td></tr>
<tr class="memdesc:a6002779614dbefb5685e2b309f47e98f"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a6002779614dbefb5685e2b309f47e98f" title="qhasharr-&gt;putstr(): Put a string into this table ">putstr()</a>: Put a string into this table  <a href="#a6002779614dbefb5685e2b309f47e98f">More...</a><br/></td></tr>
<tr class="separator:a6002779614dbefb5685e2b309f47e98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8acb022ac1b2753eb2de582657d6be1f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a8acb022ac1b2753eb2de582657d6be1f">putstrf</a> (qhasharr_t *tbl, const char *key, const char *format,...)</td></tr>
<tr class="memdesc:a8acb022ac1b2753eb2de582657d6be1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8acb022ac1b2753eb2de582657d6be1f" title="qhasharr-&gt;putstrf(): Put a formatted string into this table. ">putstrf()</a>: Put a formatted string into this table.  <a href="#a8acb022ac1b2753eb2de582657d6be1f">More...</a><br/></td></tr>
<tr class="separator:a8acb022ac1b2753eb2de582657d6be1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a638ddf5e4fb9216e2d5b52900ce9c8c0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a638ddf5e4fb9216e2d5b52900ce9c8c0">putint</a> (qhasharr_t *tbl, const char *key, int64_t num)</td></tr>
<tr class="memdesc:a638ddf5e4fb9216e2d5b52900ce9c8c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a638ddf5e4fb9216e2d5b52900ce9c8c0" title="qhasharr-&gt;putint(): Put an integer into this table as string type. ">putint()</a>: Put an integer into this table as string type.  <a href="#a638ddf5e4fb9216e2d5b52900ce9c8c0">More...</a><br/></td></tr>
<tr class="separator:a638ddf5e4fb9216e2d5b52900ce9c8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a609667716cfd0fe6215709f9ddf0c6"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a8a609667716cfd0fe6215709f9ddf0c6">get</a> (qhasharr_t *tbl, const char *key, size_t *<a class="el" href="qstack_8c.html#a47e1fcd7f30a2bff4b9ad661f8eea361">size</a>)</td></tr>
<tr class="memdesc:a8a609667716cfd0fe6215709f9ddf0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8a609667716cfd0fe6215709f9ddf0c6" title="qhasharr-&gt;get(): Get an object from this table ">get()</a>: Get an object from this table  <a href="#a8a609667716cfd0fe6215709f9ddf0c6">More...</a><br/></td></tr>
<tr class="separator:a8a609667716cfd0fe6215709f9ddf0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d0224f6cd2595ac04860ebfb7fc97e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a02d0224f6cd2595ac04860ebfb7fc97e">getstr</a> (qhasharr_t *tbl, const char *key)</td></tr>
<tr class="memdesc:a02d0224f6cd2595ac04860ebfb7fc97e"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a02d0224f6cd2595ac04860ebfb7fc97e" title="qhasharr-&gt;getstr(): Finds an object with given name and returns as string type. ">getstr()</a>: Finds an object with given name and returns as string type.  <a href="#a02d0224f6cd2595ac04860ebfb7fc97e">More...</a><br/></td></tr>
<tr class="separator:a02d0224f6cd2595ac04860ebfb7fc97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961458184356c316430ac23acfba72aa"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a961458184356c316430ac23acfba72aa">getint</a> (qhasharr_t *tbl, const char *key)</td></tr>
<tr class="memdesc:a961458184356c316430ac23acfba72aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a961458184356c316430ac23acfba72aa" title="qhasharr-&gt;getint(): Finds an object with given name and returns as integer type. ">getint()</a>: Finds an object with given name and returns as integer type.  <a href="#a961458184356c316430ac23acfba72aa">More...</a><br/></td></tr>
<tr class="separator:a961458184356c316430ac23acfba72aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e806a4039a660c9b5dab44ad03110d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d">getnext</a> (qhasharr_t *tbl, qhasharr_obj_t *obj, int *idx)</td></tr>
<tr class="memdesc:af1e806a4039a660c9b5dab44ad03110d"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a>: Get next element.  <a href="#af1e806a4039a660c9b5dab44ad03110d">More...</a><br/></td></tr>
<tr class="separator:af1e806a4039a660c9b5dab44ad03110d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4653c4040f193c6620deb7fc41fbdbdd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a4653c4040f193c6620deb7fc41fbdbdd">remove_</a> (qhasharr_t *tbl, const char *key)</td></tr>
<tr class="memdesc:a4653c4040f193c6620deb7fc41fbdbdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;remove(): Remove an object from this table.  <a href="#a4653c4040f193c6620deb7fc41fbdbdd">More...</a><br/></td></tr>
<tr class="separator:a4653c4040f193c6620deb7fc41fbdbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12db81b2ae652ec167c8f08d721294b1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a12db81b2ae652ec167c8f08d721294b1">remove_by_idx</a> (qhasharr_t *tbl, int idx)</td></tr>
<tr class="memdesc:a12db81b2ae652ec167c8f08d721294b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a12db81b2ae652ec167c8f08d721294b1" title="qhasharr-&gt;remove_by_idx(): Remove an object from this table by index number. ">remove_by_idx()</a>: Remove an object from this table by index number.  <a href="#a12db81b2ae652ec167c8f08d721294b1">More...</a><br/></td></tr>
<tr class="separator:a12db81b2ae652ec167c8f08d721294b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd2d0a6e36f18daa6b2fb2ba054961e5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#abd2d0a6e36f18daa6b2fb2ba054961e5">size</a> (qhasharr_t *tbl, int *maxslots, int *usedslots)</td></tr>
<tr class="memdesc:abd2d0a6e36f18daa6b2fb2ba054961e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#abd2d0a6e36f18daa6b2fb2ba054961e5" title="qhasharr-&gt;size(): Returns the number of objects in this table. ">size()</a>: Returns the number of objects in this table.  <a href="#abd2d0a6e36f18daa6b2fb2ba054961e5">More...</a><br/></td></tr>
<tr class="separator:abd2d0a6e36f18daa6b2fb2ba054961e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e20c1528cc098b81818883c24e21eb6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a8e20c1528cc098b81818883c24e21eb6">clear</a> (qhasharr_t *tbl)</td></tr>
<tr class="memdesc:a8e20c1528cc098b81818883c24e21eb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8e20c1528cc098b81818883c24e21eb6" title="qhasharr-&gt;clear(): Clears this table so that it contains no keys. ">clear()</a>: Clears this table so that it contains no keys.  <a href="#a8e20c1528cc098b81818883c24e21eb6">More...</a><br/></td></tr>
<tr class="separator:a8e20c1528cc098b81818883c24e21eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cc8b26f3177e52e68d7697ebb9ef513"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#a2cc8b26f3177e52e68d7697ebb9ef513">debug</a> (qhasharr_t *tbl, FILE *out)</td></tr>
<tr class="memdesc:a2cc8b26f3177e52e68d7697ebb9ef513"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a2cc8b26f3177e52e68d7697ebb9ef513" title="qhasharr-&gt;debug(): Print hash table for debugging purpose ">debug()</a>: Print hash table for debugging purpose  <a href="#a2cc8b26f3177e52e68d7697ebb9ef513">More...</a><br/></td></tr>
<tr class="separator:a2cc8b26f3177e52e68d7697ebb9ef513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7006f9d3fac26c382b6d30cf85dfd94"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qhasharr_8c.html#af7006f9d3fac26c382b6d30cf85dfd94">free_</a> (qhasharr_t *tbl)</td></tr>
<tr class="memdesc:af7006f9d3fac26c382b6d30cf85dfd94"><td class="mdescLeft">&#160;</td><td class="mdescRight">qhasharr-&gt;free(): De-allocate table reference object.  <a href="#af7006f9d3fac26c382b6d30cf85dfd94">More...</a><br/></td></tr>
<tr class="separator:af7006f9d3fac26c382b6d30cf85dfd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Static(array) hash-table implementation. </p>
<p>qhasharr implements a hash-table which maps keys to values and stores into fixed size static memory like shared-memory and memory-mapped file. The creator <a class="el" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c" title="Initialize static hash table. ">qhasharr()</a> initializes static memory to makes small slots in it. The default slot size factors are defined in Q_HASHARR_KEYSIZE and Q_HASHARR_VALUESIZE. And they are applied at compile time.</p>
<p>The value part of an element will be stored across several slots if it's size exceeds the slot size. But the key part of an element will be truncated if the size exceeds and it's length and more complex MD5 hash value will be stored with the key. So to look up a particular key, first we find an element which has same hash value. If the key was not truncated, we just do key comparison. But if the key was truncated because it's length exceeds, we do both md5 and key comparison(only stored size) to verify that the key is same. So please be aware of that, theoretically there is a possibility we pick wrong element in case a key exceeds the limit, has same length and MD5 hash with lookup key. But this possibility is very low and almost zero in practice.</p>
<p>qhasharr hash-table does not provide thread-safe handling intentionally and let users determine whether to provide locking mechanism or not, depending on the use cases. When there's race conditions expected, you should provide a shared resource control using mutex or semaphore to make sure data gets updated by one instance at a time.</p>
<div class="fragment"><div class="line">[Data Structure Diagram]</div>
<div class="line"></div>
<div class="line">+--[Static Flat Memory Area]-----------------------------------------------+</div>
<div class="line">| +-[Header]---------+ +-[Slot 0]---+ +-[Slot 1]---+        +-[Slot N]---+ |</div>
<div class="line">| |Private table data| |KEY A|DATA A| |KEY B|DATA B|  ....  |KEY N|DATA N| |</div>
<div class="line">| +------------------+ +------------+ +------------+        +------------+ |</div>
<div class="line">+--------------------------------------------------------------------------+</div>
<div class="line"></div>
<div class="line">Below diagram shows how a big value is stored.</div>
<div class="line">+--[Static Flat Memory Area------------------------------------------------+</div>
<div class="line">| +--------+ +-[Slot 0]---+ +-[Slot 1]---+ +-[Slot 2]---+ +-[Slot 3]-----+ |</div>
<div class="line">| |TBL INFO| |KEY A|DATA A| |DATA A cont.| |KEY B|DATA B| |DATA A cont.  | |</div>
<div class="line">| +--------+ +------------+ +------------+ +------------+ +--------------+ |</div>
<div class="line">|                      ^~~link~~^     ^~~~~~~~~~link~~~~~~~~~^             |</div>
<div class="line">+--------------------------------------------------------------------------+</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// initialize hash-table.</span></div>
<div class="line"><span class="keywordtype">char</span> memory[1000 * 10];</div>
<div class="line">qhasharr_t *tbl = <a class="code" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a>(memory, <span class="keyword">sizeof</span>(memory));</div>
<div class="line"><span class="keywordflow">if</span>(tbl == NULL) <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// insert elements (key duplication does not allowed)</span></div>
<div class="line">tbl-&gt;putstr(tbl, <span class="stringliteral">&quot;e1&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line">tbl-&gt;putstr(tbl, <span class="stringliteral">&quot;e2&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>);</div>
<div class="line">tbl-&gt;putstr(tbl, <span class="stringliteral">&quot;e3&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// debug print out</span></div>
<div class="line">tbl-&gt;debug(tbl, stdout);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> *e2 = tbl-&gt;getstr(tbl, <span class="stringliteral">&quot;e2&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span>(e2 != NULL) {</div>
<div class="line">   printf(<span class="stringliteral">&quot;getstr(&#39;e2&#39;) : %s\n&quot;</span>, e2);</div>
<div class="line">   free(e2);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Release reference object.</span></div>
<div class="line">tbl-&gt;free(tbl);</div>
</div><!-- fragment --><p>An example for using hash table over shared memory.</p>
<div class="fragment"><div class="line">[CREATOR SIDE]</div>
<div class="line"><span class="keywordtype">int</span> maxslots = 1000;</div>
<div class="line"><span class="keywordtype">int</span> memsize = <a class="code" href="qhasharr_8c.html#a83012ec9fea85ca5770529997306334d">qhasharr_calculate_memsize</a>(maxslots);</div>
<div class="line"></div>
<div class="line"><span class="comment">// create shared memory</span></div>
<div class="line"><span class="keywordtype">int</span> shmid = <a class="code" href="qshm_8c.html#a881b11a2d26ae83230151955545630ed">qshm_init</a>(<span class="stringliteral">&quot;/tmp/some_id_file&quot;</span>, <span class="charliteral">&#39;q&#39;</span>, memsize, <span class="keyword">true</span>);</div>
<div class="line"><span class="keywordflow">if</span>(shmid &lt; 0) <span class="keywordflow">return</span> -1; <span class="comment">// creation failed</span></div>
<div class="line"><span class="keywordtype">void</span> *memory = <a class="code" href="qshm_8c.html#a4ad7d06e37d47bb6c35a8c37b1c0a50e">qshm_get</a>(shmid);</div>
<div class="line"></div>
<div class="line"><span class="comment">// initialize hash-table</span></div>
<div class="line">qhasharr_t *tbl = <a class="code" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a>(memory, memsize);</div>
<div class="line"><span class="keywordflow">if</span>(hasharr == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">(...your codes with your own locking mechanism...)</div>
<div class="line"></div>
<div class="line"><span class="comment">// Release reference object</span></div>
<div class="line">tbl-&gt;free(tbl);</div>
<div class="line"></div>
<div class="line"><span class="comment">// destroy shared memory</span></div>
<div class="line"><a class="code" href="qshm_8c.html#aec816f3889e85322e0304c3cbd67c639">qshm_free</a>(shmid);</div>
<div class="line"></div>
<div class="line">[USER SIDE]</div>
<div class="line"><span class="keywordtype">int</span> shmid = <a class="code" href="qshm_8c.html#aa6b1f31987b42fe18dc6be25e58c0bce">qshm_getid</a>(<span class="stringliteral">&quot;/tmp/some_id_file&quot;</span>, <span class="charliteral">&#39;q&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// get shared memory</span></div>
<div class="line"><span class="keywordtype">void</span> *memory = <a class="code" href="qshm_8c.html#a4ad7d06e37d47bb6c35a8c37b1c0a50e">qshm_get</a>(shmid);</div>
<div class="line"></div>
<div class="line"><span class="comment">// map existing memory into table</span></div>
<div class="line">qhasharr_t *tbl = <a class="code" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a>(memory, 0);</div>
<div class="line"></div>
<div class="line">(...your codes with your own locking mechanism...)</div>
<div class="line"></div>
<div class="line"><span class="comment">// Release reference object</span></div>
<div class="line">tbl-&gt;free(tbl);</div>
</div><!-- fragment --> 
<p>Definition in file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a83012ec9fea85ca5770529997306334d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t qhasharr_calculate_memsize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get how much memory is needed for N slots. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max</td><td>a number of maximum internal slots</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>memory size needed</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This can be used for calculating minimum memory size for N slots. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00195">195</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa0f33578b50024a4a239472c52eee18c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qhasharr_t* qhasharr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>memsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize static hash table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memory</td><td>a pointer of data memory. </td></tr>
    <tr><td class="paramname">memsize</td><td>a size of data memory, 0 for using existing data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>qhasharr_t container pointer, otherwise returns NULL. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>EINVAL : Assigned memory is too small. It must bigger enough to allocate at least 1 slot.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="comment">// initialize hash-table with 100 slots.</span></div>
<div class="line"><span class="comment">// A single element can take several slots.</span></div>
<div class="line"><span class="keywordtype">char</span> memory[112 * 100];</div>
<div class="line"></div>
<div class="line"><span class="comment">// Initialize new table.</span></div>
<div class="line">qhasharr_t *tbl = <a class="code" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a>(memory, <span class="keyword">sizeof</span>(memory));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Use existing table.</span></div>
<div class="line">qhasharr_t *tbl2 = <a class="code" href="qhasharr_8c.html#aa0f33578b50024a4a239472c52eee18c">qhasharr</a>(memory, 0);</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00224">224</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a969b1074c488063dff5b63aa7125defa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool put </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a969b1074c488063dff5b63aa7125defa" title="qhasharr-&gt;put(): Put an object into this table. ">put()</a>: Put an object into this table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string </td></tr>
    <tr><td class="paramname">value</td><td>value object data </td></tr>
    <tr><td class="paramname">size</td><td>size of value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOBUFS : Table doesn't have enough space to store the object.</li>
<li>EINVAL : Invalid argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00296">296</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6002779614dbefb5685e2b309f47e98f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool putstr </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a6002779614dbefb5685e2b309f47e98f" title="qhasharr-&gt;putstr(): Put a string into this table ">putstr()</a>: Put a string into this table </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string. </td></tr>
    <tr><td class="paramname">value</td><td>string data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOBUFS : Table doesn't have enough space to store the object.</li>
<li>EINVAL : Invalid argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00400">400</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8acb022ac1b2753eb2de582657d6be1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool putstrf </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8acb022ac1b2753eb2de582657d6be1f" title="qhasharr-&gt;putstrf(): Put a formatted string into this table. ">putstrf()</a>: Put a formatted string into this table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key name. </td></tr>
    <tr><td class="paramname">format</td><td>formatted string data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOBUFS : Table doesn't have enough space to store the object.</li>
<li>ENOMEM : System memory allocation failure.</li>
<li>EINVAL : Invalid argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00419">419</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a638ddf5e4fb9216e2d5b52900ce9c8c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool putint </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a638ddf5e4fb9216e2d5b52900ce9c8c0" title="qhasharr-&gt;putint(): Put an integer into this table as string type. ">putint()</a>: Put an integer into this table as string type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string </td></tr>
    <tr><td class="paramname">value</td><td>value integer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOBUFS : Table doesn't have enough space to store the object.</li>
<li>EINVAL : Invalid argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The integer will be converted to a string object and stored as string object. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00448">448</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a609667716cfd0fe6215709f9ddf0c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* get </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8a609667716cfd0fe6215709f9ddf0c6" title="qhasharr-&gt;get(): Get an object from this table ">get()</a>: Get an object from this table </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string </td></tr>
    <tr><td class="paramname">size</td><td>if not NULL, oject size will be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>malloced object pointer if successful, otherwise(not found) returns NULL </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : No such key found.</li>
<li>EINVAL : Invalid argument.</li>
<li>ENOMEM : Memory allocation failed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>returned object must be freed after done using. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00471">471</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a02d0224f6cd2595ac04860ebfb7fc97e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* getstr </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a02d0224f6cd2595ac04860ebfb7fc97e" title="qhasharr-&gt;getstr(): Finds an object with given name and returns as string type. ">getstr()</a>: Finds an object with given name and returns as string type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string pointer if successful, otherwise(not found) returns NULL </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : No such key found.</li>
<li>EINVAL : Invalid argument.</li>
<li>ENOMEM : Memory allocation failed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>returned object must be freed after done using. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00507">507</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a961458184356c316430ac23acfba72aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int64_t getint </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a961458184356c316430ac23acfba72aa" title="qhasharr-&gt;getint(): Finds an object with given name and returns as integer type. ">getint()</a>: Finds an object with given name and returns as integer type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value integer if successful, otherwise(not found) returns 0 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : No such key found.</li>
<li>EINVAL : Invalid argument.</li>
<li>ENOMEM : Memory allocation failed. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00524">524</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="af1e806a4039a660c9b5dab44ad03110d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool getnext </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">qhasharr_obj_t *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a>: Get next element. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">idx</td><td>index pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>key name string if successful, otherwise(end of table) returns NULL </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : No next element.</li>
<li>EINVAL : Invald argument.</li>
<li>ENOMEM : Memory allocation failed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> idx = 0;</div>
<div class="line">qhasharr_obj_t obj;</div>
<div class="line"><span class="keywordflow">while</span>(tbl-&gt;getnext(tbl, &amp;obj, &amp;idx) == <span class="keyword">true</span>) {</div>
<div class="line">  printf(<span class="stringliteral">&quot;NAME=%s, DATA=%s, SIZE=%zu\n&quot;</span>,</div>
<div class="line">         obj.name, (<span class="keywordtype">char</span>*)obj.data, obj.size);</div>
<div class="line">  free(obj.name);</div>
<div class="line">  free(obj.data);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Please be aware a key name will be returned with truncated length because key name gets truncated if it doesn't fit into slot size, Q_HASHARR_KEYSIZE. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00563">563</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4653c4040f193c6620deb7fc41fbdbdd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool remove_ </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;remove(): Remove an object from this table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise(not found) returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : No such key found.</li>
<li>EINVAL : Invald argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00616">616</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a12db81b2ae652ec167c8f08d721294b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool remove_by_idx </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a12db81b2ae652ec167c8f08d721294b1" title="qhasharr-&gt;remove_by_idx(): Remove an object from this table by index number. ">remove_by_idx()</a>: Remove an object from this table by index number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">key</td><td>key string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise(not found) returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>ENOENT : Index is not pointing a valid object.</li>
<li>EINVAL : Invald argument.</li>
<li>EFAULT : Unexpected error. Data structure is not constant.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> idx = 0;</div>
<div class="line">qhasharr_obj_t obj;</div>
<div class="line"><span class="keywordflow">while</span>(tbl-&gt;getnext(tbl, &amp;obj, &amp;idx) == <span class="keyword">true</span>) {</div>
<div class="line">  <span class="keywordflow">if</span> (condition_to_remove) {</div>
<div class="line">    idx--;  <span class="comment">// adjust index by -1</span></div>
<div class="line">    <a class="code" href="qhasharr_8c.html#a12db81b2ae652ec167c8f08d721294b1">remove_by_idx</a>(idx);</div>
<div class="line">  }</div>
<div class="line">  free(obj.name);</div>
<div class="line">  free(obj.data);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This function is to remove an object in <a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a> traversal loop without knowing the object name but index value. When key names are longer than defined size, the keys are stored with truncation with their fingerprint, so this method provides a way to remove those keys. <a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a> returns actual index + 1(pointing next slot of current finding), so you need to adjust it by -1 for the valid index number. And once you remove object by this method, rewind idx by -1 before calling <a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a> because collision objects can be moved back to removed index again, so by adjusting index by -1, <a class="el" href="qhasharr_8c.html#af1e806a4039a660c9b5dab44ad03110d" title="qhasharr-&gt;getnext(): Get next element. ">getnext()</a> can continue search from the removed slot index again. Please refer an example code. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00673">673</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="abd2d0a6e36f18daa6b2fb2ba054961e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int size </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>maxslots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>usedslots</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#abd2d0a6e36f18daa6b2fb2ba054961e5" title="qhasharr-&gt;size(): Returns the number of objects in this table. ">size()</a>: Returns the number of objects in this table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a number of elements stored. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00749">749</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8e20c1528cc098b81818883c24e21eb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clear </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a8e20c1528cc098b81818883c24e21eb6" title="qhasharr-&gt;clear(): Clears this table so that it contains no keys. ">clear()</a>: Clears this table so that it contains no keys. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00772">772</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2cc8b26f3177e52e68d7697ebb9ef513"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool debug </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;<a class="el" href="qhasharr_8c.html#a2cc8b26f3177e52e68d7697ebb9ef513" title="qhasharr-&gt;debug(): Print hash table for debugging purpose ">debug()</a>: Print hash table for debugging purpose </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhasharr_t container pointer. </td></tr>
    <tr><td class="paramname">out</td><td>output stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful, otherwise returns false </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">errno</td><td>will be set in error condition.<ul>
<li>EIO : Invalid output stream. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00801">801</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
<a class="anchor" id="af7006f9d3fac26c382b6d30cf85dfd94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_ </td>
          <td>(</td>
          <td class="paramtype">qhasharr_t *&#160;</td>
          <td class="paramname"><em>tbl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>qhasharr-&gt;free(): De-allocate table reference object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tbl</td><td>qhashtbl_t container pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does not de-allocate memory but only function reference object. Data memory such as shared memory must be de-allocated separately. </dd></dl>

<p>Definition at line <a class="el" href="qhasharr_8c_source.html#l00876">876</a> of file <a class="el" href="qhasharr_8c_source.html">qhasharr.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0b61c55142250c0cc363383afd8075a4.html">containers</a></li><li class="navelem"><a class="el" href="qhasharr_8c.html">qhasharr.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
